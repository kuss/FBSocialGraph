<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <script type = "text/javascript" src="js/jquery-1.9.0.min.js"></script>
        <script type = "text/javascript" src="js/sigma.min.js"></script>
        <script type = "text/javascript" src="js/sigma.forceatlas2.js"></script>
        <script type = "text/javascript" src="js/sigma.fisheye.js"></script>
        <script type = "text/javascript" src="js/main.js"></script>
        <title> Facebook Social Graph </title>
    </head>
    <body>
        <div id="fb-root"></div>
        <script>
          window.fbAsyncInit = function() {
            FB.init({
              appId      : '434938063256042', 
              channelUrl : '//www.kuss.pe.kr/FBSocialGraph/channel.html', 
              status     : true,
              cookie     : true,
              xfbml      : true 
            });

            FB.login(function(response) {
              if (response.authResponse) {          
                FB.api('/me/friends', function(response) {
                  if (response.data) {
                    numFriends = response.data.length;

                    // Make Person Data
                    $.each(response.data, function(index, friend) {
                      Friends[friend.id] = {'name': friend.name, 'numMutuals': 0, 'mutuals': []};
                    });

                    // Make Mutual Friends Data
                    $.each(response.data, function(index, friend) {
                      FB.api('/me/mutualfriends/'+friend.id, function(response2) {
                        if (response2.data) {
                          Friends[friend.id]['numMutuals'] = response2.data.length;
                          Friends[friend.id]['mutuals'] = response2.data;
                        }
                      });
                    });

                    Main();
                  }       
                  else {
                    console.log(response);
                  }
                });
              }
              else {
                console.log(response);
              }
            });
          };

          (function(d, debug){
             var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
             if (d.getElementById(id)) {return;}
             js = d.createElement('script'); js.id = id; js.async = true;
             js.src = "//connect.facebook.net/en_US/all" + (debug ? "/debug" : "") + ".js";
             ref.parentNode.insertBefore(js, ref);
           }(document, false));
        </script>
        <div id = "social-graph-parent" style="width: 760px; height: 700px;">
            <div id = "social-graph" style="width: 100%; height: 100%;"></div>
        </div>
        <div id = "fb-status"></div>
    </body>
</html>
